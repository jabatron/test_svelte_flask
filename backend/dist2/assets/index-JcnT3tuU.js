var W=Object.defineProperty;var X=(e,t,n)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var j=(e,t,n)=>X(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function w(){}function K(e){return e()}function J(){return Object.create(null)}function x(e){e.forEach(K)}function R(e){return typeof e=="function"}function U(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Z(e){return Object.keys(e).length===0}function _(e,t){e.appendChild(t)}function y(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function b(){return V(" ")}function C(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function ee(e){return function(t){return t.preventDefault(),e.call(this,t)}}function E(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function te(e){return Array.from(e.childNodes)}function ne(e,t){t=""+t,e.data!==t&&(e.data=t)}function k(e,t){e.value=t??""}let D;function P(e){D=e}const v=[],T=[];let O=[];const I=[],ie=Promise.resolve();let q=!1;function oe(){q||(q=!0,ie.then(Y))}function B(e){O.push(e)}function re(e){I.push(e)}const A=new Set;let L=0;function Y(){if(L!==0)return;const e=D;do{try{for(;L<v.length;){const t=v[L];L++,P(t),se(t.$$)}}catch(t){throw v.length=0,L=0,t}for(P(null),v.length=0,L=0;T.length;)T.pop()();for(let t=0;t<O.length;t+=1){const n=O[t];A.has(n)||(A.add(n),n())}O.length=0}while(v.length);for(;I.length;)I.pop()();q=!1,A.clear(),P(e)}function se(e){if(e.fragment!==null){e.update(),x(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}function ue(e){const t=[],n=[];O.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),O=t}const N=new Set;let $;function le(){$={r:0,c:[],p:$}}function fe(){$.r||x($.c),$=$.p}function S(e,t){e&&e.i&&(N.delete(e),e.i(t))}function M(e,t,n,i){if(e&&e.o){if(N.has(e))return;N.add(e),$.c.push(()=>{N.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function ce(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function de(e){e&&e.c()}function z(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),B(()=>{const s=e.$$.on_mount.map(K).filter(R);e.$$.on_destroy?e.$$.on_destroy.push(...s):x(s),e.$$.on_mount=[]}),o.forEach(B)}function G(e,t){const n=e.$$;n.fragment!==null&&(ue(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ae(e,t){e.$$.dirty[0]===-1&&(v.push(e),oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function H(e,t,n,i,o,s,u=null,f=[-1]){const l=D;P(e);const r=e.$$={fragment:null,ctx:[],props:s,update:w,not_equal:o,bound:J(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:J(),dirty:f,skip_bound:!1,root:t.target||l.$$.root};u&&u(r.root);let d=!1;if(r.ctx=n?n(e,t.props||{},(a,p,...c)=>{const m=c.length?c[0]:p;return r.ctx&&o(r.ctx[a],r.ctx[a]=m)&&(!r.skip_bound&&r.bound[a]&&r.bound[a](m),d&&ae(e,a)),p}):[],r.update(),d=!0,x(r.before_update),r.fragment=i?i(r.ctx):!1,t.target){if(t.hydrate){const a=te(t.target);r.fragment&&r.fragment.l(a),a.forEach(g)}else r.fragment&&r.fragment.c();t.intro&&S(e.$$.fragment),z(e,t.target,t.anchor),Y()}P(l)}class Q{constructor(){j(this,"$$");j(this,"$$set")}$destroy(){G(this,1),this.$destroy=w}$on(t,n){if(!R(n))return w;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!Z(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pe);function _e(e){let t,n,i,o,s,u,f,l;return{c(){t=h("form"),n=h("input"),i=b(),o=h("input"),s=b(),u=h("button"),u.textContent="Login",E(n,"type","email"),E(n,"placeholder","Email"),n.required=!0,E(o,"type","password"),E(o,"placeholder","Password"),o.required=!0,E(u,"type","submit")},m(r,d){y(r,t,d),_(t,n),k(n,e[0]),_(t,i),_(t,o),k(o,e[1]),_(t,s),_(t,u),f||(l=[C(n,"input",e[4]),C(o,"input",e[5]),C(t,"submit",ee(e[2]))],f=!0)},p(r,[d]){d&1&&n.value!==r[0]&&k(n,r[0]),d&2&&o.value!==r[1]&&k(o,r[1])},i:w,o:w,d(r){r&&g(t),f=!1,x(l)}}}function he(e,t,n){let i="",o="",{isLogin:s=!1}=t;async function u(){const r=await fetch("http://0.0.0.0:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:o})});console.log("Login response",r),await r.json(),r.ok?n(3,s=!0):alert("Login failed")}function f(){i=this.value,n(0,i)}function l(){o=this.value,n(1,o)}return e.$$set=r=>{"isLogin"in r&&n(3,s=r.isLogin)},[i,o,u,s,f,l]}class ge extends Q{constructor(t){super(),H(this,t,he,_e,U,{isLogin:3})}}function me(e){let t,n,i,o,s,u,f,l=e[1].message+"",r,d,a;return{c(){t=h("h1"),t.textContent="Protected",n=b(),i=h("div"),o=h("p"),o.textContent="This is a protected route. You need to be logged in to access it.",s=b(),u=h("button"),u.textContent="Protected",f=b(),r=V(l)},m(p,c){y(p,t,c),y(p,n,c),y(p,i,c),_(i,o),_(i,s),_(i,u),_(i,f),_(i,r),d||(a=C(u,"click",e[2]),d=!0)},p(p,c){c&2&&l!==(l=p[1].message+"")&&ne(r,l)},i:w,o:w,d(p){p&&(g(t),g(n),g(i)),d=!1,a()}}}function ye(e){let t,n,i,o,s,u,f,l,r,d;function a(c){e[3](c)}let p={};return e[0]!==void 0&&(p.isLogin=e[0]),o=new ge({props:p}),T.push(()=>ce(o,"isLogin",a)),{c(){t=h("h1"),t.textContent="Login",n=b(),i=h("div"),de(o.$$.fragment),u=b(),f=h("button"),f.textContent="Protected"},m(c,m){y(c,t,m),y(c,n,m),y(c,i,m),z(o,i,null),_(i,u),_(i,f),l=!0,r||(d=C(f,"click",e[2]),r=!0)},p(c,m){const F={};!s&&m&1&&(s=!0,F.isLogin=c[0],re(()=>s=!1)),o.$set(F)},i(c){l||(S(o.$$.fragment,c),l=!0)},o(c){M(o.$$.fragment,c),l=!1},d(c){c&&(g(t),g(n),g(i)),G(o),r=!1,d()}}}function $e(e){let t,n,i,o;const s=[ye,me],u=[];function f(l,r){return l[0]?1:0}return n=f(e),i=u[n]=s[n](e),{c(){t=h("main"),i.c()},m(l,r){y(l,t,r),u[n].m(t,null),o=!0},p(l,[r]){let d=n;n=f(l),n===d?u[n].p(l,r):(le(),M(u[d],1,1,()=>{u[d]=null}),fe(),i=u[n],i?i.p(l,r):(i=u[n]=s[n](l),i.c()),S(i,1),i.m(t,null))},i(l){o||(S(i),o=!0)},o(l){M(i),o=!1},d(l){l&&g(t),u[n].d()}}}function be(e,t,n){let i,o=!1;async function s(){const f=await fetch("http://0.0.0.0:8080/protected",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});n(1,i=await f.json())}function u(f){o=f,n(0,o)}return n(1,i=""),[o,i,s,u]}class we extends Q{constructor(t){super(),H(this,t,be,$e,U,{})}}new we({target:document.getElementById("app")});
